<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
  <head>
		<!-- BASICS -->
    <meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Campus Garden</title>
    <meta name="description" content="">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<link rel="stylesheet" type="text/css" href="css/isotope.css" media="screen" />
		<link rel="stylesheet" href="js/fancybox/jquery.fancybox.css" type="text/css" media="screen" />
		<link rel="stylesheet" href="css/bootstrap.css">
		<link rel="stylesheet" href="css/bootstrap-theme.css">
		<link href="css/responsive-slider.css" rel="stylesheet">
		<link rel="stylesheet" href="css/animate.css">
        <link rel="stylesheet" href="css/style.css">

		<link rel="stylesheet" href="css/font-awesome.min.css">
		<!-- skin -->
		<link rel="stylesheet" href="skin/default.css">
        <!-- =======================================================
            Theme Name: Green
            Theme URL: https://bootstrapmade.com/green-free-one-page-bootstrap-template/
            Author: BootstrapMade
            Author URL: https://bootstrapmade.com
        ======================================================= -->
  </head>

  <body>

	<div class="header">
	<section id="header" class="appear">

		<div class="navbar navbar-fixed-top" role="navigation" data-0="line-height:100px; height:80px; background-color:rgba(0,0,0,0.3);" data-300="line-height:60px; height:60px; background-color:rgba(0,0,0,1);">

				<div class="navbar-header">
					<button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
						<span class="fa fa-bars color-white"></span>
					</button>
					<h1><a class="navbar-brand" href="index.html" data-0="line-height:90px;" data-300="line-height:50px;">CAMPUS GARDEN
					</a></h1>
				</div>
				<div class="navbar-collapse">
					<ul class="nav navbar-nav" data-0="margin-top:20px;" data-300="margin-top:5px;">
						<li><a href="/">Home</a></li>
						<li><a href="/about">About Us</a></li>
            <li class="active"><a href="/volunteer">Volunteer</a></li>
						<li><a href="/location">Location</a></li>
						<li><a href="/contact">Contact</a></li>
					</ul>
				</div><!--/.navbar-collapse -->
			</div>


	</section>
	</div>

		<!-- spacer section:stats -->
		<section id="parallax1" class="section pad-top40 pad-bot40 mar-bot20" data-stellar-background-ratio="0.5">
			<div class="container ">
            <div class="align-center pad-top40 pad-bot40">
                <h4 class="color-white pad-top50">Volunteer Calendar</h4>
        				<p class="color-white">For the 2017 spring semester, Campus Garden hours will be hosted every Sunday and Thursday
                  from 3:30 to 5:30 p.m. Note that volunteer hours will not occur on set Wake Forest holidays.</p>
            </div>


			</div>
		</section>

    <section id="services" class="pad-top10 pad-bot5 bg-white">
      <div class="container">
      <!-- insert calendar table here -->

      <ul class="shifts">
        <% for(var i=0; i<shifts.length; i++) {%>
          <li class="shift">
            <!-- show data in readonly input elements. The ids are generated with EJS -->
            <form id="<%= 'form'+i %>" action="/update" method="post">
              <span>
                <input type="date" name="date" id="<%= 'date'+i %>" readonly value="<%= shifts[i].date %>">
              </span>
              <!-- USE THIS HIDDEN INPUT TO SEND ADDITIONAL INFORMATION TO THE SERVER  -->
              <!-- WE WANT TO SEND i, THE NUMBER OF THE ROW BEING MODIFIED -->
              <input type="hidden" name="num" value="<%= i %>">
              <input type="hidden" name="shiftID" id="<%= 'shiftID'+i %>" value="<%= shifts[i]._id %>">
              <span>
                <input type="time" name="start_time" id="<%= 'start_time'+i %>" readonly value="<%= shifts[i].start_time %>">
              </span>
              <span>
                <input type="time" name="end_time" id="<%= 'end_time'+i %>" readonly value="<%= shifts[i].end_time %>">
              </span>
              <span>
                <input type="number" name="num_volunteers" id="<%= 'num_volunteers'+i %>" readonly value="<%= shifts[i].num_volunteers %>">
              </span>
              <!-- generate the id for each button with EJS -->
              <button type="button" id= <%= 'sign_up' + i %>
                <%
                var volCount = 0;
                for(j= 0; j< signup.length; j++){
                  if(signup[j].shiftID == shifts[i]._id){
                    volCount += parseInt(signup[j].numVols);
                  }
                }
                console.log("In volunteer.ejs: " + volCount);

                if (volCount >= shifts[i].num_volunteers) {
                %>
                <%=
                   'disabled'
                %>
                <% } %>
                onclick="signUp(this)">Sign Up</button>
            </form>
          </li>
          <% } %>
        </ul>
    </div>
  </section>

  <section id="footer" class="section footer">
		<div class="container">
			<div class="row animated opacity mar-bot0" data-andown="fadeIn" data-animation="animation">
				<div class="col-sm-12 align-center">
                    <ul class="social-network social-circle">
                        <li><a href="#" class="icoRss" title="Rss"><i class="fa fa-rss"></i></a></li>
                        <li><a href="https://www.facebook.com/SustainableWFU/" class="icoFacebook" title="Facebook"><i class="fa fa-facebook"></i></a></li>
                        <li><a href="https://twitter.com/SustainableWFU" class="icoTwitter" title="Twitter"><i class="fa fa-twitter"></i></a></li>
                        <li><a href="#" class="icoGoogle" title="Google +"><i class="fa fa-google-plus"></i></a></li>
                        <li><a href="#" class="icoLinkedin" title="Linkedin"><i class="fa fa-linkedin"></i></a></li>
                    </ul>
				</div>
			</div>

			<div class="row align-center copyright">
					<div class="col-sm-12">
					    <p>&copy; GREEN Theme</p>
                        <div class="credits">
                            <!--
                                All the links in the footer should remain intact.
                                You can delete the links only if you purchased the pro version.
                                Licensing information: https://bootstrapmade.com/license/
                                Purchase the pro version with working PHP/AJAX contact form: https://bootstrapmade.com/buy/?theme=Green
                            -->
                            <a href="https://bootstrapmade.com/">Bootstrap Themes</a> by <a href="https://bootstrapmade.com/">BootstrapMade</a>
                        </div>
                    </div>
			</div>
		</div>

	</section>

	<a href="#header" class="scrollup"><i class="fa fa-chevron-up"></i></a>

  <script>
    function signUp(button){
      var rownum = button.id.match(/\d+/)[0];  // Extract the number from string 'editNUM'
      var dateInput = document.getElementById('date'+rownum).value;
      var shift = document.getElementById('shiftID'+rownum).value;
      localStorage.setItem('shiftID', shift);
      localStorage.setItem('date_', dateInput);


      window.location = "/signup"
      return false;
    }

    //function to disable a button if the number of volunteers has been maxed out
    /*function shiftFull(button){  console.log("Hello World!!!!!!!!!!!!!");
      var rownum = button.id.match(/\d+/)[0];
      var shift = document.getElementById('shiftID'+rownum).value;
      var maxNum = document.getElementById('num_volunteers'+rownum).value;

      //count number of volunteers already signed up for this selected shift
      int i;
      int volCount = 0;
      for(i = 0; i < signup.length; i++){
        if(signup[i].shiftID == shift){
          volCount += signup[i].numVols;
        }
      }
      console.log("number of voluneteers signed up: " + volCount);
      //check whether there are already maxed out on the number of volunteers for a shifts
      if(volCount >= maxNum)
        button.disabled = true;
      else {
        button.disabled = false;
      }
    }*/
  </script>

	<script src="js/modernizr-2.6.2-respond-1.1.0.min.js"></script>
	<script src="js/jquery.js"></script>
	<script src="js/jquery.easing.1.3.js"></script>
    <script src="js/bootstrap.min.js"></script>
	<script src="https://maps.google.com/maps/api/js?sensor=true"></script>
	<script src="js/jquery.isotope.min.js"></script>
	<script src="js/jquery.nicescroll.min.js"></script>
	<script src="js/fancybox/jquery.fancybox.pack.js"></script>
	<script src="js/skrollr.min.js"></script>
	<script src="js/jquery.scrollTo-1.4.3.1-min.js"></script>
	<script src="js/jquery.localscroll-1.2.7-min.js"></script>
	<script src="js/stellar.js"></script>
	<script src="js/responsive-slider.js"></script>
	<script src="js/jquery.appear.js"></script>
	<script src="js/grid.js"></script>
    <script src="js/main.js"></script>
    <script src="js/wow.min.js"></script>
</html>
