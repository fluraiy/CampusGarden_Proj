<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
  <head>
		<!-- BASICS -->
    <meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Campus Garden</title>
    <meta name="description" content="">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<link rel="stylesheet" type="text/css" href="css/isotope.css" media="screen" />
		<link rel="stylesheet" href="js/fancybox/jquery.fancybox.css" type="text/css" media="screen" />
		<link rel="stylesheet" href="css/bootstrap.css">
		<link rel="stylesheet" href="css/bootstrap-theme.css">
		<link href="css/responsive-slider.css" rel="stylesheet">
		<link rel="stylesheet" href="css/animate.css">
        <link rel="stylesheet" href="css/style.css">

		<link rel="stylesheet" href="css/font-awesome.min.css">
		<!-- skin -->
		<link rel="stylesheet" href="skin/default.css">
        <!-- =======================================================
            Theme Name: Green
            Theme URL: https://bootstrapmade.com/green-free-one-page-bootstrap-template/
            Author: BootstrapMade
            Author URL: https://bootstrapmade.com
        ======================================================= -->
  </head>

  <body>

	<div class="header">
	<section id="header" class="appear">

		<div class="navbar navbar-fixed-top" role="navigation" data-0="line-height:100px; height:80px; background-color:rgba(0,0,0,1);" data-300="line-height:60px; height:60px; background-color:rgba(0,0,0,1);">

				<div class="navbar-header">
					<button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
						<span class="fa fa-bars color-white"></span>
					</button>
					<h1><a class="navbar-brand" href="index.html" data-0="line-height:90px;" data-300="line-height:50px;">CAMPUS GARDEN
					</a></h1>
				</div>
				<div class="navbar-collapse">
					<ul class="nav navbar-nav" data-0="margin-top:20px;" data-300="margin-top:5px;">
						<li><a href="/">Home</a></li>
						<li class="active"><a href="/about">About Us</a></li>
            <li><a href="/volunteer">Volunteer</a></li>
						<li><a href="/location">Location</a></li>
						<li><a href="/contact">Contact</a></li>
					</ul>
				</div><!--/.navbar-collapse -->
			</div>
	</section>
	</div>
  <!-- services -->
	 <section id="services" class="section pad-bot5 bg-white">
	    <div class="container">
        <div class="row mar-bot5">
          <div class="col-md-offset-3 col-md-6">
            <div class="section-header">
            <div class="wow bounceIn"data-animation-delay="7.8s">
              <h2 class="section-heading animated">Create a New Shift</h2>
            </div>
            </div>
          </div>
        </div>

      <ul class="shifts">
        <% for(var i=0; i<shifts.length; i++) {%>
          <li class="shift">
            <!-- show data in readonly input elements. The ids are generated with EJS -->
            <form id="<%= 'form'+i %>" action="/update" method="post">
              <span>
                <input type="date" name="date" id="<%= 'date'+i %>" readonly value="<%= shifts[i].date %>">
              </span>
              <!-- USE THIS HIDDEN INPUT TO SEND ADDITIONAL INFORMATION TO THE SERVER  -->
              <!-- WE WANT TO SEND i, THE NUMBER OF THE ROW BEING MODIFIED -->
              <input type="hidden" name="num" value="<%= i %>">
              <span>
                <input type="time" name="start_time" id="<%= 'start_time'+i %>" readonly value="<%= shifts[i].start_time %>">
              </span>
              <span>
                <input type="time" name="end_time" id="<%= 'end_time'+i %>" readonly value="<%= shifts[i].end_time %>">
              </span>
              <span>
                <input type="number" name="num_volunteers" id="<%= 'num_volunteers'+i %>" readonly value="<%= shifts[i].num_volunteers %>">
              </span>
              <!-- generate the id for each button with EJS -->
              <button type="button" id= <%= 'edit' + i %> onclick="edit(this)">Edit</button>
            </form>
          </li>
          <% } %>
        </ul>

      <form action="/addshift" method="POST">
        <input type="date" placeholder="date" name="date">
        <input type="time" placeholder="start time" name="start_time">
        <input type="time" placeholder="end time" name="end_time">
        <input type="number" placeholder="num volunteers" name="num_volunteers">
        <button class="btn-sm" type="submit">Submit</button>
      </form>
    </div>
  </section>

  <section id="footer" class="section footer">
		<div class="container">
			<div class="row animated opacity mar-bot0" data-andown="fadeIn" data-animation="animation">
				<div class="col-sm-12 align-center">
          <ul class="social-network social-circle">
              <li><a href="#" class="icoRss" title="Rss"><i class="fa fa-rss"></i></a></li>
              <li><a href="https://www.facebook.com/SustainableWFU/" class="icoFacebook" title="Facebook"><i class="fa fa-facebook"></i></a></li>
              <li><a href="https://twitter.com/SustainableWFU" class="icoTwitter" title="Twitter"><i class="fa fa-twitter"></i></a></li>
              <li><a href="#" class="icoGoogle" title="Google +"><i class="fa fa-google-plus"></i></a></li>
              <li><a href="#" class="icoLinkedin" title="Linkedin"><i class="fa fa-linkedin"></i></a></li>
          </ul>
				</div>
			</div>

			<div class="row align-center copyright">
					<div class="col-sm-12">
				    <p>&copy; GREEN Theme</p>
            <div class="credits">
                <!--
                    All the links in the footer should remain intact.
                    You can delete the links only if you purchased the pro version.
                    Licensing information: https://bootstrapmade.com/license/
                    Purchase the pro version with working PHP/AJAX contact form: https://bootstrapmade.com/buy/?theme=Green
                -->
                <a href="https://bootstrapmade.com/">Bootstrap Themes</a> by <a href="https://bootstrapmade.com/">BootstrapMade</a>
            </div>
          </div>
			</div>
		</div>
	</section>
	<a href="#header" class="scrollup"><i class="fa fa-chevron-up"></i></a>

    <script>
    var content = [];
    // Respond to the edit button being clicked.
    // Get the data from title and rating and update the database if they
    // were modified
    function edit(button) {
      // get the number in the button id. It matches the number in the id of the
      // input element we need
      var rownum = button.id.match(/\d+/)[0];  // Extract the number from string 'editNUM'
      var dateInput = document.getElementById('date'+rownum);
      var StimeInput = document.getElementById('start_time'+rownum);
      var EtimeInput = document.getElementById('end_time'+rownum);
      var numVolInput = document.getElementById('num_volunteers'+rownum);

      if (button.innerHTML == "done") {
        dateInput.readOnly = true;
        StimeInput.readOnly = true;
        EtimeInput.readOnly = true;
        numVolInput.readOnly = true;
        // if the content was edited then update the database
        if (content[rownum].date != dateInput.value || content[rownum].start_time != StimeInput.value || content[rownum].end_time != EtimeInput.value || content[rownum].num_volunteers != numVolInput.value) {
          var form = document.getElementById('form'+rownum);
          form.submit();
          console.log('submitted form');
        }
        dateInput.style.backgroundColor = "white";
        StimeInput.style.backgroundColor = "white";
        EtimeInput.style.backgroundColor = "white";
        numVolInput.style.backgroundColor = "white";
        button.innerHTML = "edit";
      }
      else {
        // get the content of titleInput and ratingInput
        content[rownum] = {date: dateInput.value, start_time: StimeInput.value, end_time: EtimeInput.value, num_volunteers: numVolInput.value};
        console.log(content[rownum]);
        // make this input element editable
        dateInput.readOnly = false;
        StimeInput.readOnly = false;
        EtimeInput.readOnly = false;
        numVolInput.readOnly = false;
        dateInput.style.backgroundColor = "yellow";
        StimeInput.style.backgroundColor = "yellow";
        EtimeInput.style.backgroundColor = "yellow";
        numVolInput.style.backgroundColor = "yellow";
        button.innerHTML = "done";
      }
    }
    </script>
  </body>
</html>
